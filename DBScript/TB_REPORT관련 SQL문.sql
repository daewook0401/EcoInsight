-- 신고 카테고리 테이블
CREATE TABLE TB_REPORT_CATEGORY (
  REPORT_CATEGORY_NO   VARCHAR2(5)    PRIMARY KEY,
  REPORT_CATEGORY_NAME VARCHAR2(100)  NOT NULL
);


-- 2) 커뮤니티 게시판 신고
CREATE TABLE TB_COMMUNITY_REPORT (
  REPORT_NO           NUMBER GENERATED BY DEFAULT AS IDENTITY PRIMARY KEY, 
  REPORTER            NUMBER                 NOT NULL, 
  C_BOARD_NO          NUMBER                 NOT NULL, 
  REPORT_CATEGORY_NO  VARCHAR2(5)            NOT NULL, 
  REPORT_CONTENT      VARCHAR2(1000), 
  CONSTRAINT FK_COMMUNITY_RP_MEMBER
    FOREIGN KEY (REPORTER)
    REFERENCES TB_MEMBER       (MEMBER_NO),

  CONSTRAINT FK_COMMUNITY_RP_BOARD
    FOREIGN KEY (C_BOARD_NO)
    REFERENCES TB_COMMUNITY_BOARD (C_BOARD_NO),

  CONSTRAINT FK_COMMUNITY_RP_CATEGORY
    FOREIGN KEY (REPORT_CATEGORY_NO)
    REFERENCES TB_REPORT_CATEGORY (REPORT_CATEGORY_NO)
);

-- 인증게시판 신고

CREATE TABLE TB_AUTH_BOARD_REPORT (
  REPORT_NO           NUMBER GENERATED BY DEFAULT AS IDENTITY PRIMARY KEY, 
  REPORTER            NUMBER                 NOT NULL, 
  AUTH_BOARD_NO       NUMBER                 NOT NULL, 
  REPORT_CATEGORY_NO  VARCHAR2(5)            NOT NULL, 
  REPORT_CONTENT      VARCHAR2(1000), 

  CONSTRAINT FK_AUTHBOARD_RP_MEMBER
    FOREIGN KEY (REPORTER)
    REFERENCES TB_MEMBER       (MEMBER_NO),

  CONSTRAINT FK_AUTHBOARD_RP_BOARD
    FOREIGN KEY (AUTH_BOARD_NO)
    REFERENCES TB_AUTH_BOARD   (AUTH_BOARD_NO),

  CONSTRAINT FK_AUTHBOARD_RP_CATEGORY
    FOREIGN KEY (REPORT_CATEGORY_NO)
    REFERENCES TB_REPORT_CATEGORY (REPORT_CATEGORY_NO)
);

-- 커뮤니티 댓글 신고

CREATE TABLE TB_COMMUNITY_CMT_REPORT (
  CMT_REPORT_NO       NUMBER GENERATED BY DEFAULT AS IDENTITY PRIMARY KEY, 
  REPORT_CATEGORY_NO  VARCHAR2(5)            NOT NULL, 
  REPORTER            NUMBER                 NOT NULL, 
  CMT_REPORT_CONTENT  VARCHAR2(1000),

  CONSTRAINT FK_COMMUNITY_CMT_RP_MEMBER
    FOREIGN KEY (REPORTER)
    REFERENCES TB_MEMBER       (MEMBER_NO),

  CONSTRAINT FK_COMMUNITY_CMT_RP_CATEGORY
    FOREIGN KEY (REPORT_CATEGORY_NO)
    REFERENCES TB_REPORT_CATEGORY (REPORT_CATEGORY_NO)
);

-- 인증게시판 댓글 신고

CREATE TABLE TB_AUTH_BOARD_CMT_REPORT (
  CMT_REPORT_NO       NUMBER GENERATED BY DEFAULT AS IDENTITY PRIMARY KEY, 
  REPORT_CATEGORY_NO  VARCHAR2(5)            NOT NULL, 
  REPORTER            NUMBER                 NOT NULL, 
  CMT_REPORT_CONTENT  VARCHAR2(1000), 

  CONSTRAINT FK_AUTHBOARD_CMT_RP_MEMBER
    FOREIGN KEY (REPORTER)
    REFERENCES TB_MEMBER       (MEMBER_NO),

  CONSTRAINT FK_AUTHBOARD_CMT_RP_CATEGORY
    FOREIGN KEY (REPORT_CATEGORY_NO)
    REFERENCES TB_REPORT_CATEGORY (REPORT_CATEGORY_NO)
);


-- 멤버테이블 주민등록번호 컬럼 삭제
ALTER TABLE TB_MEMBER DROP COLUMN MEMBER_SSN;



COMMIT;





------------------ 수정사항있으면 과감하게 DROP 해주세요 ---------------------------------
