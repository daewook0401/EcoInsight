-- 공지사항 카테고리 테이블
CREATE TABLE TB_NOTICE_TYPE (
  NOTICE_TYPE_NO    NUMBER GENERATED BY DEFAULT AS IDENTITY PRIMARY KEY,  -- 공지사항 카테고리 식별값
  NOTICE_TYPE_NAME  VARCHAR2(20)           NOT NULL                     -- 공지사항 카테고리 이름
);

SELECT * FROM TB_NOTICE_TYPE;
DROP TABLE TB_NOTICE_TYPE;

COMMIT;


-- 공지사항 테이블
CREATE TABLE TB_NOTICE (
  NOTICE_NO       NUMBER GENERATED BY DEFAULT AS IDENTITY PRIMARY KEY,    
  NOTICE_TYPE_NO  NUMBER                      NOT NULL,
  MEMBER_NO       NUMBER                      NOT NULL, 
  NOTICE_TITLE    VARCHAR2(100)               NOT NULL,
  NOTICE_CONTENT  VARCHAR2(4000)              NOT NULL,
  CREATED_DATE    DATE     DEFAULT SYSTIMESTAMP NOT NULL,
  MODIFIED_DATE   DATE     DEFAULT NULL,
  STATUS          CHAR(1) DEFAULT 'N'        NOT NULL 
                    CHECK (STATUS IN ('Y','N')),
  VIEW_COUNT    	NUMBER   DEFAULT 0         NOT NULL,
  CONSTRAINT FK_NOTICE_TYPE
    FOREIGN KEY (NOTICE_TYPE_NO)
    REFERENCES TB_NOTICE_TYPE (NOTICE_TYPE_NO),

  CONSTRAINT FK_NOTICE_MEMBER
    FOREIGN KEY (MEMBER_NO)
    REFERENCES TB_MEMBER      (MEMBER_NO)
);

SELECT * FROM TB_NOTICE;

DROP * FROM TB_NOTICE;

COMMIT;


-- 공지사항 첨부파일 테이블
CREATE TABLE TB_NOTICE_ATTACHMENT_IMG (
  NOTICE_ATTACHMENT_NO   NUMBER GENERATED BY DEFAULT AS IDENTITY PRIMARY KEY,  -- 첨부파일 번호
  NOTICE_NO              NUMBER                      NOT NULL,                -- 공지사항 번호 (FK)
  NOTICE_ATTACHMENT_ITEM VARCHAR2(300),                                        -- 첨부파일 이름

  CONSTRAINT FK_NOTICE_ATTACH_NOTICE
    FOREIGN KEY (NOTICE_NO)
    REFERENCES TB_NOTICE (NOTICE_NO)
);

SELECT * FROM TB_NOTICE_ATTACHMENT_IMG;

DROP TABLE TB_NOTICE;


COMMIT;


------- 수정사항있으면 시원하게 DROP하셔도 좋습니다 --------


