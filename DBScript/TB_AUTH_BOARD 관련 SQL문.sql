SELECT * FROM TB_BOARD_TYPE;
SELECT * FROM TB_COMMUNITY_BOARD;
SELECT * FROM TB_MEMBER;
SELECT * FROM TB_AUTH_BOARD ;



-- 이건 인증 카테고리 테이블
CREATE TABLE TB_AUTH_TYPE(
AUTH_CATEGORY_ID NUMBER GENERATED BY DEFAULT AS IDENTITY PRIMARY KEY,
AUTH_CATEGORY_NAME VARCHAR(20) NOT NULL
);


-- 이건 인증게시판 메인테이블
CREATE TABLE TB_AUTH_BOARD (
  AUTH_BOARD_NO     NUMBER GENERATED BY DEFAULT AS IDENTITY PRIMARY KEY,
  MEMBER_NO         NUMBER               NOT NULL,
  AUTH_CATEGORY_ID  NUMBER               NOT NULL,
  A_BOARD_TITLE     VARCHAR2(200)        NOT NULL,
  A_BOARD_CONTENT   VARCHAR2(4000)       NOT NULL,
  CREATED_DATE      DATE      DEFAULT SYSDATE NOT NULL,
  MODIFIED_DATE     DATE,
  VIEW_COUNT        NUMBER    DEFAULT 0       NOT NULL,
  IS_DELETED        CHAR(1)   DEFAULT 'N'     NOT NULL
    CONSTRAINT CHK_TB_AUTH_BOARD_DELETED CHECK (IS_DELETED IN ('Y','N')),

  CONSTRAINT FK_TB_AUTH_BOARD_MEMBER   FOREIGN KEY (MEMBER_NO)        REFERENCES TB_MEMBER(MEMBER_NO),
  CONSTRAINT FK_TB_AUTH_BOARD_TYPE     FOREIGN KEY (AUTH_CATEGORY_ID) REFERENCES TB_AUTH_TYPE(AUTH_CATEGORY_ID)
);

DROP TABLE TB_AUTH_BOARD;
DROP TABLE TB_AUTH_TYPE;

SELECT * FROM TB_AUTH_TYPE;
SELECT * FROM TB_AUTH_BOARD;

-----------------------------------------


-- 이건 인증게시판 첨부파일 테이블
CREATE TABLE TB_AUTH_ATTACHMENT_IMG (
  AUTH_ATTACHMENT_NO   NUMBER GENERATED BY DEFAULT AS IDENTITY PRIMARY KEY,
  AUTH_BOARD_NO        NUMBER               NOT NULL,
  AUTH_ATTACHMENT_ITEM VARCHAR2(300)       NOT NULL,

  CONSTRAINT FK_TB_AUTH_ATTACH_BOARD FOREIGN KEY (AUTH_BOARD_NO) REFERENCES TB_AUTH_BOARD(AUTH_BOARD_NO)
);



-- 이건 인증게시판 댓글 테이블
CREATE TABLE TB_AUTH_COMMENT (
  AUTH_COMMENT_NO  NUMBER GENERATED BY DEFAULT AS IDENTITY PRIMARY KEY,
  AUTH_BOARD_NO    NUMBER               NOT NULL,
  MEMBER_NO        NUMBER               NOT NULL,
  AUTH_CMT_CNT     VARCHAR2(1000)       NOT NULL,
  PARENT_CMT_NO    NUMBER,
  CREATED_DATE     DATE      DEFAULT SYSDATE NOT NULL,
  MODIFIED_DATE    DATE,

  CONSTRAINT FK_TB_AUTH_COMMENT_BOARD  FOREIGN KEY (AUTH_BOARD_NO)  REFERENCES TB_AUTH_BOARD(AUTH_BOARD_NO),
  CONSTRAINT FK_TB_AUTH_COMMENT_MEMBER FOREIGN KEY (MEMBER_NO)      REFERENCES TB_MEMBER(MEMBER_NO),
  CONSTRAINT FK_TB_AUTH_COMMENT_PARENT FOREIGN KEY (PARENT_CMT_NO)  REFERENCES TB_AUTH_COMMENT(AUTH_COMMENT_NO)
);

-- 이건 인증게시판 추천 테이블 
CREATE TABLE TB_AUTH_RECOMMEND (
  AUTH_BOARD_NO NUMBER NOT NULL,
  MEMBER_NO     NUMBER NOT NULL,

  CONSTRAINT PK_TB_AUTH_RECOMMEND   PRIMARY KEY (AUTH_BOARD_NO, MEMBER_NO),
  CONSTRAINT FK_TB_AUTH_RECO_BOARD  FOREIGN KEY (AUTH_BOARD_NO) REFERENCES TB_AUTH_BOARD(AUTH_BOARD_NO),
  CONSTRAINT FK_TB_AUTH_RECO_MEMBER FOREIGN KEY (MEMBER_NO)     REFERENCES TB_MEMBER(MEMBER_NO)
);

ROLLBACK;


SELECT * FROM TB_AUTH_BOARD;
SELECT * FROM TB_AUTH_ATTACHMENT_IMG;
SELECT * FROM TB_AUTH_RECOMMEND;
SELECT * FROM TB_AUTH_TYPE;
SELECT * FROM TB_AUTH_COMMENT;
 
COMMIT;



------- 수정사항있으면 시원하게 DROP하셔도 좋습니다 --------

