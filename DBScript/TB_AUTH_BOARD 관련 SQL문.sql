SELECT * FROM TB_BOARD_TYPE;
SELECT * FROM TB_COMMUNITY_BOARD;
SELECT * FROM TB_MEMBER;
SELECT * FROM TB_AUTH_BOARD ;



-- 이건 인증 카테고리 테이블
CREATE TABLE TB_AUTH_TYPE(
CATEGORY_ID NUMBER GENERATED BY DEFAULT AS IDENTITY PRIMARY KEY,
CATEGORY_NAME VARCHAR(20) NOT NULL
);


-- 이건 인증게시판 메인테이블
CREATE TABLE TB_AUTH_BOARD (
  BOARD_NO     NUMBER GENERATED BY DEFAULT AS IDENTITY PRIMARY KEY,
  MEMBER_NO         NUMBER               NOT NULL,
  CATEGORY_ID  NUMBER               NOT NULL,
  BOARD_TITLE     VARCHAR2(200)        NOT NULL,
  BOARD_CONTENT   VARCHAR2(4000)       NOT NULL,
  CREATED_DATE      DATE      DEFAULT SYSDATE NOT NULL,
  MODIFIED_DATE     DATE,
  VIEW_COUNT        NUMBER    DEFAULT 0       NOT NULL,
  IS_DELETED        CHAR(1)   DEFAULT 'N'     NOT NULL
    CONSTRAINT CHK_TB_AUTH_BOARD_DELETED CHECK (IS_DELETED IN ('Y','N')),

  CONSTRAINT FK_TB_AUTH_BOARD_MEMBER   FOREIGN KEY (MEMBER_NO)        REFERENCES TB_MEMBER(MEMBER_NO),
  CONSTRAINT FK_TB_AUTH_BOARD_TYPE     FOREIGN KEY (CATEGORY_ID) REFERENCES TB_AUTH_TYPE(CATEGORY_ID)
);

DROP TABLE TB_AUTH_BOARD;
DROP TABLE TB_AUTH_TYPE;
DROP TABLE TB_AUTH_COMMENT;
DROP TABLE TB_AUTH_ATTACHMENT_IMG;
DROP TABLE TB_AUTH_RECOMMEND;

COMMIT;

SELECT * FROM TB_AUTH_TYPE;
SELECT * FROM TB_AUTH_BOARD;

-----------------------------------------


-- 이건 인증게시판 첨부파일 테이블
CREATE TABLE TB_AUTH_ATTACHMENT_IMG (
  ATTACHMENT_NO   NUMBER GENERATED BY DEFAULT AS IDENTITY PRIMARY KEY,
  BOARD_NO        NUMBER               NOT NULL,
  ATTACHMENT_ITEM VARCHAR2(300)       NOT NULL,

  CONSTRAINT FK_TB_AUTH_ATTACHMENT_BOARD FOREIGN KEY (BOARD_NO) REFERENCES TB_AUTH_BOARD(BOARD_NO)
);

SELECT * FROM TB_AUTH_ATTACHMENT_IMG;
SELECT * FROM TB_AUTH_COMMENT;


-- 이건 인증게시판 댓글 테이블
CREATE TABLE TB_AUTH_COMMENT (
  COMMENT_NO  NUMBER GENERATED BY DEFAULT AS IDENTITY PRIMARY KEY,
  BOARD_NO    NUMBER               NOT NULL,
  MEMBER_NO        NUMBER               NOT NULL,
  COMMENT_CONTENT     VARCHAR2(1000)       NOT NULL,
  PARENT_COMMENT_NO    NUMBER,
  CREATED_DATE     DATE      DEFAULT SYSDATE NOT NULL,
  MODIFIED_DATE    DATE,
  IS_DELETED           CHAR(1)   DEFAULT 'N'     NOT NULL
  CONSTRAINT CHK_TB_AUTH_COMMENT_BOARD_DELETED CHECK (IS_DELETED IN ('Y','N')),

  CONSTRAINT FK_TB_AUTH_COMMENT_BOARD  FOREIGN KEY (BOARD_NO)  REFERENCES TB_AUTH_BOARD(BOARD_NO),
  CONSTRAINT FK_TB_AUTH_COMMENT_MEMBER FOREIGN KEY (MEMBER_NO)      REFERENCES TB_MEMBER(MEMBER_NO),
  CONSTRAINT FK_TB_AUTH_COMMENT_PARENT FOREIGN KEY (PARENT_COMMENT_NO)  REFERENCES TB_AUTH_COMMENT(COMMENT_NO)
);




-- 이건 인증게시판 추천 테이블 
CREATE TABLE TB_AUTH_RECOMMEND (
  BOARD_NO NUMBER NOT NULL,
  MEMBER_NO     NUMBER NOT NULL,

  CONSTRAINT PK_TB_AUTH_RECOMMEND   PRIMARY KEY (BOARD_NO, MEMBER_NO),
  CONSTRAINT FK_TB_AUTH_RECOMMEND_BOARD  FOREIGN KEY (BOARD_NO) REFERENCES TB_AUTH_BOARD(BOARD_NO),
  CONSTRAINT FK_TB_AUTH_RECOMMEND_MEMBER FOREIGN KEY (MEMBER_NO)     REFERENCES TB_MEMBER(MEMBER_NO)
);

ROLLBACK;



SELECT * FROM TB_MEMBER;


SELECT * FROM TB_AUTH_BOARD;
SELECT * FROM TB_AUTH_ATTACHMENT_IMG;
SELECT * FROM TB_AUTH_RECOMMEND;
SELECT * FROM TB_AUTH_TYPE;
SELECT * FROM TB_AUTH_COMMENT;
 
COMMIT;



------- 수정사항있으면 시원하게 DROP하셔도 좋습니다 --------

